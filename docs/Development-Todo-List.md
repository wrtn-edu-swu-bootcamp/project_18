# S2S 재고 관리 시스템 - 개발 Todo 리스트

## Phase 1: 기반 설정 및 환경 구성

### 1.1 개발 환경 설정
- **목표**: 프로젝트 실행을 위한 기본 환경 구성
- **참고 문서**: `docs/Code-Architecture.md` 섹션 10 (배포 가이드), `SETUP.md`
- **작업 내용**:
  - Node.js 18+ 설치 확인
  - Backend 디렉토리에서 `npm install` 실행
  - Frontend 디렉토리에서 `npm install` 실행
  - `.env` 파일 생성 및 이메일 설정 (Gmail 앱 비밀번호)
  - Backend 서버 실행 확인 (`http://localhost:3001`)
  - Frontend 개발 서버 실행 확인 (`http://localhost:5173`)

### 1.2 프로젝트 구조 검증
- **목표**: 문서에 명시된 디렉토리 구조와 실제 구조 일치 확인
- **참고 문서**: `docs/Code-Architecture.md` 섹션 2 (디렉토리 구조)
- **작업 내용**:
  - `frontend/src/pages/` 폴더에 12개 페이지 파일 존재 확인
  - `frontend/src/utils/api.js` 파일 존재 및 함수 구현 확인
  - `backend/data/` 폴더에 stores.json, requests.json, repairs.json 존재 확인
  - `backend/server.js` 파일 구조 확인

### 1.3 데이터 파일 초기화
- **목표**: 테스트를 위한 샘플 데이터 준비
- **참고 문서**: `docs/Code-Architecture.md` 섹션 4.3 (데이터 모델)
- **작업 내용**:
  - `backend/data/stores.json`에 6개 매장 데이터 추가 (노원점, 강남점, 홍대점, 잠실점, 부산점, 대구점)
  - 각 매장에 샘플 재고 데이터 추가 (카테고리별: OUTERWEAR, KNITWEAR, T-SHIRT, BLOUSE, DRESS&SKIRT, PANTS, ACC)
  - `backend/data/requests.json` 초기화 (빈 배열)
  - `backend/data/repairs.json` 초기화 (빈 배열)

---

## Phase 2: 인증 및 라우팅 구현

### 2.1 로그인 페이지 완성
- **목표**: 매장 및 관리자 선택 기능 구현
- **참고 문서**: `docs/Wireframe.md` 섹션 2.1 (Login Page), `docs/Design-Guide.md` 섹션 5.3 (입력 필드)
- **작업 내용**:
  - 매장 선택 드롭다운 구현 (6개 매장: 노원점, 강남점, 홍대점, 잠실점, 부산점, 대구점)
  - 관리자 선택 드롭다운 구현 (admin1~4)
  - 이메일 입력 필드 추가 (선택사항)
  - 로그인 버튼 클릭 시 localStorage에 저장 (myStore, currentStore, adminName, adminEmail)
  - 로그인 성공 시 `/home`으로 리다이렉트
  - 입력 검증 (매장, 관리자 필수 입력)

### 2.2 라우팅 설정 검증
- **목표**: 모든 페이지 라우트가 정상 작동하는지 확인
- **참고 문서**: `docs/Code-Architecture.md` 섹션 5.1 (React Router 설정), `frontend/src/App.jsx`
- **작업 내용**:
  - `App.jsx`에 12개 라우트 모두 등록 확인
  - 각 페이지 접근 시 인증 확인 로직 동작 확인
  - 인증 없이 접근 시 `/`로 리다이렉트 확인
  - 네비게이션 테스트 (뒤로가기 버튼, 링크 클릭)

### 2.3 공통 헤더 컴포넌트 (선택사항)
- **목표**: 페이지 간 일관된 헤더 UI 제공
- **참고 문서**: `docs/Wireframe.md` 섹션 4.1 (헤더 패턴), `docs/Design-Guide.md` 섹션 10 (다크 모드)
- **작업 내용**:
  - 뒤로가기 버튼, 페이지 제목, 서브 텍스트 표시
  - Home 페이지는 다크 테마 헤더 (`backgroundColor: '#1e293b'`)
  - 로그아웃 버튼 기능 구현 (localStorage 초기화 후 `/`로 이동)

---

## Phase 3: 핵심 기능 구현 - 재고 관리

### 3.1 Home 대시보드 구현
- **목표**: 메인 대시보드에 긴급 처리 항목 및 통계 표시
- **참고 문서**: `docs/Wireframe.md` 섹션 2.2 (Home Page), `docs/Design-Guide.md` 섹션 11.1 (긴급 처리 카드)
- **작업 내용**:
  - 다크 테마 헤더 구현 (매장명, 관리자명, 로그아웃 버튼)
  - 긴급 처리 카드 4개 구현 (출고 처리, 수선 전달, 입고 처리, 고객 메일)
  - 각 카드에 실시간 카운트 표시 (API 호출로 데이터 가져오기)
  - 긴급 상태일 때 배경색 및 테두리색 변경 (`#fff7ed`, `#fb923c` 등)
  - 빠른 액션 버튼 4개 구현 (재고 요청, 재고 관리, 수선 관리, 고객 정보)
  - 주요 통계 카드 구현 (진열 공백 품목, 인기 품목 TOP 3)
  - 하단 링크 구현 (전체 거래 내역, 관리자 기록)

### 3.2 재고 관리 페이지 (CurrentInventory)
- **목표**: 재고 조회, 추가, 수정 기능 구현
- **참고 문서**: `docs/Wireframe.md` 섹션 2.3 (Current Inventory Page), `docs/Code-Architecture.md` 섹션 3.4 (API 유틸리티)
- **작업 내용**:
  - 재고 추가 폼 구현 (카테고리, 컬러, 사이즈, 창고 수량, 진열 수량)
  - 카테고리별 사이즈 옵션 동적 변경 (SIZE_BY_CATEGORY 참조)
  - 카테고리 필터 버튼 구현 (전체, OUTERWEAR, KNITWEAR 등)
  - 재고 카드 그리드 레이아웃 구현 (`gridTemplateColumns: 'repeat(auto-fill, minmax(320px, 1fr))'`)
  - 제품별 그룹화 로직 구현 (같은 카테고리+컬러는 하나로 합치기)
  - 사이즈별 수량 표시 (클릭 시 수정 모달 열기)
  - 재고 수정 모달 구현 (진열 수량 변경 시 창고 수량 자동 계산)
  - API 연동: `getStoreInventory()`, `addInventoryItem()`, `updateInventoryItem()`

### 3.3 재고 요청 페이지 (InventoryRequest)
- **목표**: 다른 매장에 재고 요청하는 기능 구현
- **참고 문서**: `docs/Wireframe.md` 섹션 2.7 (Inventory Request Page), `docs/Code-Architecture.md` 섹션 4.4 (재고 요청 흐름)
- **작업 내용**:
  - 4단계 폼 구현 (매장 선택, 제품 선택, 수량 입력, 메모)
  - 매장 선택 드롭다운 (내 매장 제외)
  - 카테고리 선택 → 제품 선택 → 사이즈 선택 (연쇄 드롭다운)
  - 수량 입력 필드
  - "진열 상품 포함" 체크박스 (needsInspection 플래그)
  - 메모 입력 필드 (선택사항)
  - 이메일 발송 버튼 클릭 시 API 호출 (`/api/send-request-email`)
  - 성공 시 알림 표시 및 `/home`으로 리다이렉트

### 3.4 입고 대기 페이지 (Incoming)
- **목표**: 내가 요청한 재고의 상태 확인 및 완료 처리
- **참고 문서**: `docs/Wireframe.md` 섹션 2.5 (Incoming Page), `docs/Design-Guide.md` 섹션 2.3 (요청 상태별 컬러)
- **작업 내용**:
  - 상태 필터 버튼 구현 (전체, 요청됨, 승인됨, 배송중, 완료)
  - 정렬 옵션 구현 (최신순, 오래된순)
  - 요청 목록 테이블 구현 (제품명, 수량, 요청 매장, 요청일, 요청자, 특이사항, 상태, 주문서, 완료)
  - 상태별 뱃지 색상 적용 (STATUS_COLORS 참조)
  - 주문서 모달 구현 (보내는 사람, 받는 사람, 제품 정보 표시)
  - 배송중 상태일 때만 "완료" 버튼 표시
  - 완료 버튼 클릭 시 API 호출 (`PATCH /api/requests/:id` status: 'completed')
  - 완료 시 입고 매장 재고 자동 추가 확인

### 3.5 출고 대기 페이지 (Outgoing)
- **목표**: 다른 매장이 요청한 재고의 승인 및 배송 처리
- **참고 문서**: `docs/Wireframe.md` 섹션 2.6 (Outgoing Page), `docs/Code-Architecture.md` 섹션 4.4 (재고 요청 흐름)
- **작업 내용**:
  - 상태 필터 구현 (전체, 요청됨, 승인됨만 표시)
  - 요청 목록 테이블 구현 (제품명, 수량, 요청 매장, 요청일, 요청자, 특이사항, 상태, 처리)
  - "요청됨" 상태일 때 "승인" 버튼 표시
  - "승인됨" 상태일 때 "배송" 버튼 표시
  - 승인 버튼 클릭 시 API 호출 (`PATCH /api/requests/:id` status: 'approved')
  - 배송 버튼 클릭 시 API 호출 (`PATCH /api/requests/:id` status: 'in_transit')
  - 배송 시작 시 재고 자동 차감 확인 (진열 수량 우선 차감, 부족 시 창고 수량 차감)

---

## Phase 4: 고급 기능 구현 - 수선 관리

### 4.1 수선 관리 페이지 (Repairs)
- **목표**: 수선 등록, 상태 관리, 알림톡 발송 기능 구현
- **참고 문서**: `docs/Wireframe.md` 섹션 2.4 (Repairs Page), `docs/Code-Architecture.md` 섹션 4.4 (수선 흐름)
- **작업 내용**:
  - 수선 등록 폼 구현 (관리자, 고객명, 제품 선택, 수선 내용, 비용, 결제 상태)
  - 상태 필터 탭 구현 (수선 전, 수선 중, 수선 완료)
  - 탭별 색상 적용 (REPAIR_COLORS 참조)
  - 수선 목록 테이블 구현 (관리자, 고객명, 제품명, 수선 내용, 비용, 결제 상태, 액션)
  - "수선 전" 탭: 예상 시간 선택 드롭다운 + "보내기" 버튼
  - "수선 중" 탭: 남은 시간 실시간 표시 (카운트다운)
  - 자동 완료 로직 구현 (5초마다 체크, `estimatedMinutes` 경과 시 자동 완료)
  - "수선 완료" 탭: 전달 여부 체크박스 (결제 완료 시만 활성화), 알림톡 발송 버튼
  - 알림톡 발송 기능 구현 (시뮬레이션, `notificationSent: true` 업데이트)
  - API 연동: `GET /api/repairs/store/:storeId`, `POST /api/repairs`, `PATCH /api/repairs/:id`

### 4.2 고객 정보 페이지 (CustomerInfo)
- **목표**: 고객 정보 조회 및 관리
- **참고 문서**: `docs/Code-Architecture.md` (현재 문서에 상세 명시 없음, 기존 코드 참조)
- **작업 내용**:
  - 고객 목록 표시 (수선 내역 기반)
  - 고객별 수선 이력 조회
  - 고객 정보 검색 기능
  - 고객 연락처 관리 (선택사항)

### 4.3 고객 이메일 페이지 (CustomerEmail)
- **목표**: 고객에게 이메일 발송 기능
- **참고 문서**: `docs/Wireframe.md` (현재 문서에 상세 명시 없음)
- **작업 내용**:
  - 수선 완료 고객 목록 표시
  - 일괄 알림톡 발송 기능 (Home 페이지의 기능과 연동)
  - 개별 이메일 발송 기능 (선택사항)

---

## Phase 5: 통계 및 기록 기능

### 5.1 거래 내역 페이지 (History)
- **목표**: 모든 재고 이동 및 수선 내역 조회
- **참고 문서**: `docs/Code-Architecture.md` (현재 문서에 상세 명시 없음)
- **작업 내용**:
  - 모든 요청 내역 조회 (`GET /api/requests`)
  - 날짜별 필터링 기능
  - 매장별 필터링 기능
  - 타임라인 형식 표시
  - 상태별 색상 구분

### 5.2 관리자 기록 페이지 (AdminLogs)
- **목표**: 관리자별 활동 기록 조회
- **참고 문서**: `docs/Code-Architecture.md` (현재 문서에 상세 명시 없음)
- **작업 내용**:
  - 관리자별 활동 기록 수집 로직 구현 (요청 생성, 승인, 배송 등)
  - 기록 저장 구조 설계 (새로운 JSON 파일 또는 기존 파일 확장)
  - 관리자별 필터링 기능
  - 날짜별 필터링 기능
  - 활동 유형별 표시 (재고 요청, 수선 등록, 승인 등)

---

## Phase 6: UI/UX 개선 및 최적화

### 6.1 반응형 디자인 적용
- **목표**: 모바일, 태블릿, 데스크톱에서 모두 사용 가능하도록 개선
- **참고 문서**: `docs/Wireframe.md` 섹션 5 (반응형 브레이크포인트), `docs/Design-Guide.md` 섹션 7 (반응형 디자인)
- **작업 내용**:
  - 모바일 (< 768px): 1열 그리드, 스택형 카드
  - 태블릿 (768px ~ 1024px): 2열 그리드
  - 데스크톱 (> 1024px): 3~4열 그리드
  - 테이블 가로 스크롤 처리
  - 터치 타겟 크기 확인 (최소 44px x 44px)

### 6.2 로딩 상태 및 에러 처리 개선
- **목표**: 사용자 경험 향상을 위한 피드백 제공
- **참고 문서**: `docs/Code-Architecture.md` 섹션 8 (에러 처리), `docs/Design-Guide.md` 섹션 8.3 (로딩 스피너)
- **작업 내용**:
  - API 호출 중 로딩 스피너 표시
  - 에러 발생 시 사용자 친화적 메시지 표시
  - 네트워크 오류 처리
  - 재시도 기능 구현 (선택사항)

### 6.3 애니메이션 및 트랜지션 추가
- **목표**: 부드러운 사용자 경험 제공
- **참고 문서**: `docs/Design-Guide.md` 섹션 8 (애니메이션 & 트랜지션)
- **작업 내용**:
  - 카드 호버 효과 (`transform: translateY(-2px)`)
  - 버튼 호버 효과 (색상 변경)
  - 모달 열기/닫기 애니메이션
  - 페이지 전환 효과 (선택사항)

### 6.4 접근성 개선
- **목표**: 다양한 사용자가 사용할 수 있도록 개선
- **참고 문서**: `docs/Design-Guide.md` 섹션 9 (접근성 가이드라인)
- **작업 내용**:
  - 컬러 대비율 확인 (최소 4.5:1)
  - 키보드 네비게이션 지원
  - 포커스 표시 개선 (`box-shadow: '0 0 0 3px rgba(59, 130, 246, 0.1)'`)
  - 스크린 리더 지원 (aria-label 추가)

---

## Phase 7: 백엔드 API 완성 및 검증

### 7.1 API 엔드포인트 검증
- **목표**: 모든 API가 문서대로 동작하는지 확인
- **참고 문서**: `docs/Code-Architecture.md` 섹션 4.2 (API 엔드포인트)
- **작업 내용**:
  - 매장 API 테스트 (GET, POST, PATCH)
  - 요청 API 테스트 (POST, GET, PATCH)
  - 수선 API 테스트 (GET, POST, PATCH, DELETE)
  - 이메일 발송 API 테스트
  - 에러 케이스 테스트 (404, 500 등)

### 7.2 비즈니스 로직 검증
- **목표**: 재고 요청 및 수선 흐름이 정확히 동작하는지 확인
- **참고 문서**: `docs/Code-Architecture.md` 섹션 4.4 (비즈니스 로직)
- **작업 내용**:
  - 재고 요청 흐름 테스트 (requested → approved → in_transit → completed)
  - 재고 차감 로직 확인 (배송 시작 시)
  - 재고 추가 로직 확인 (완료 시)
  - 수선 흐름 테스트 (수선 전 → 수선 중 → 수선 완료)
  - 자동 완료 로직 확인

### 7.3 데이터 무결성 검증
- **목표**: 데이터 일관성 유지
- **참고 문서**: `docs/Code-Architecture.md` 섹션 4.3 (데이터 모델)
- **작업 내용**:
  - JSON 파일 형식 검증
  - 필수 필드 존재 확인
  - 데이터 타입 검증
  - 중복 ID 방지 로직 확인

---

## Phase 8: 테스트 및 배포 준비

### 8.1 통합 테스트
- **목표**: 전체 시스템이 정상 작동하는지 확인
- **참고 문서**: `docs/Wireframe.md` 섹션 6 (상호작용 플로우)
- **작업 내용**:
  - 재고 요청 전체 플로우 테스트 (요청 → 승인 → 배송 → 완료)
  - 수선 관리 전체 플로우 테스트 (등록 → 수선 중 → 완료 → 알림톡)
  - 다중 매장 시나리오 테스트
  - 동시 요청 처리 테스트

### 8.2 성능 최적화
- **목표**: 빠른 응답 시간 및 부드러운 사용자 경험
- **참고 문서**: `docs/Code-Architecture.md` 섹션 9 (성능 최적화)
- **작업 내용**:
  - 병렬 API 호출 적용 (`Promise.all()`)
  - 불필요한 리렌더링 방지 (React.memo, useMemo)
  - 이미지 최적화 (있는 경우)
  - 코드 스플리팅 (선택사항)

### 8.3 프로덕션 빌드 준비
- **목표**: 배포 가능한 빌드 생성
- **참고 문서**: `docs/Code-Architecture.md` 섹션 10.3 (프로덕션 빌드)
- **작업 내용**:
  - Frontend 빌드 (`npm run build`)
  - 환경 변수 설정 (프로덕션용)
  - CORS 설정 확인
  - 정적 파일 서빙 설정

### 8.4 문서화 완성
- **목표**: 프로젝트 이해 및 유지보수 용이성 향상
- **참고 문서**: 모든 문서 파일
- **작업 내용**:
  - README.md 업데이트 (설치, 실행 방법)
  - API 문서 작성 (선택사항)
  - 코드 주석 추가 (복잡한 로직)
  - 사용자 가이드 작성 (선택사항)

---

## Phase 9: 추가 기능 (선택사항)

### 9.1 챗봇 기능 (Chat)
- **목표**: 자연어 기반 재고 요청
- **참고 문서**: `README.md` (챗봇 기능 설명)
- **작업 내용**:
  - 키워드 파싱 로직 구현
  - 재고 검색 API 연동 (`POST /api/inventory/search`)
  - 매장 선택 UI 구현
  - 챗봇 UI 구현 (카카오톡 스타일)

### 9.2 제품 검색 기능 (ProductSearch)
- **목표**: 빠른 제품 검색
- **참고 문서**: `docs/Code-Architecture.md` (현재 문서에 상세 명시 없음)
- **작업 내용**:
  - 검색 입력 필드 구현
  - 실시간 검색 결과 표시
  - 필터 기능 (카테고리, 사이즈 등)

---

## 참고 사항

- 각 Phase는 순차적으로 진행하되, 일부 작업은 병렬로 진행 가능
- Phase 1-3은 필수, Phase 4-6은 권장, Phase 7-9는 선택사항
- 각 Todo 완료 시 해당 문서의 관련 섹션을 다시 확인하여 요구사항 충족 여부 검증
- 코드 작성 시 `.cursorrules` 파일의 규칙 준수
- 모든 API 호출은 `frontend/src/utils/api.js`의 함수 사용
- 모든 스타일은 `docs/Design-Guide.md`의 가이드라인 준수
